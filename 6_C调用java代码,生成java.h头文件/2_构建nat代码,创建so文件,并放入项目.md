- **需要多个文件**

  - ==**第一步 创建项目 (项目名-> hello , 包名 com.example.hellonat  )**==

    - 在 MainActivity.java 文件中添加如下内容

    - ```java
      package com.example.hellonat;
      import androidx.appcompat.app.AppCompatActivity;
      import android.os.Bundle;
      import android.util.Log;
      
      public class MainActivity extends AppCompatActivity {
      
        // 这里是添加的, 生成出来的 .so文件存在于 app/src/main/jniLibs/x86_64/libhello.so
          static {
              System.loadLibrary("hello");
          }
        
      	  //这里也是添加的. 写在 libhello.so 文件内的方法
          public native String getText();
        
        
          @Override
          protected void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);
              setContentView(R.layout.activity_main);
              Log.i("测试: ",getText());
          }
      }
      ```

  - ==** 第二步 随后在 `app/src/main/`  目录下, 新建  `jni 目录` 和  `jniLibs目录`**==

  - ==**第三步 然后生成 名为 `com_example_hellonat_MainActivity.h` 的头文件**==

    - 使用终端在该项目的 `app\src\main\java`  目录内执行下面的命令

      - `$ javah -jni com.example.hellonat.MainActivity  `

    - 里面的内容如下

    - ```c++
      /* DO NOT EDIT THIS FILE - it is machine generated */
      #include <jni.h>
      #include <string.h>
      /* Header for class com_example_hellonat_MainActivity */
      
      #ifndef _Included_com_example_hellonat_MainActivity
      #define _Included_com_example_hellonat_MainActivity
      #ifdef __cplusplus
      extern "C" {
      #endif
      /*
       * Class:     com_example_hellonat_MainActivity
       * Method:    getText
       * Signature: ()V
       */
      JNIEXPORT jstring JNICALL Java_com_example_hellonat_MainActivity_getText
        (JNIEnv *, jobject);
      //上面这个函数最重要, 是先定义完 java内容之后在生成的
        
      #ifdef __cplusplus
      }
      #endif
      #endif
      ```

  - ==**第四步 将 `com_example_hellonat_MainActivity.h` 头文件 移动到  `app/src/main/jni` 目录下**==

  - ==**第五步  在 `app/src/main/jni`目录内新建两个文件 `Android.mk` 和`Application.mk`**==

    - **内容如下**

      - ```makefile
        #Android.mk 文件内容
        LOCAL_PATH := $(call my-dir)
        include $(CLEAR_VARS)
        
        LOCAL_MODULE    := hello
        LOCAL_SRC_FILES := hello.cpp
        
        include $(BUILD_SHARED_LIBRARY)
        ```

      - ```makefile
        #Application.mk  文件内容
        APP_ABI := arm64-v8a x86_64
        APP_PLATFORM := android-26
        ```

  - ==**第六步  在 `app/src/main/jni`目录内新建 `hello.cpp`文件, 用来实现函数**==

    - **hello.cpp 文件内容如下**

      - ```c++
        #include "com_example_hellonat_MainActivity.h"
        #include <iostream>
        
        jstring
        Java_com_example_hellonat_MainActivity_getText( JNIEnv* env,
                                                          jobject thiz )
        {
            std::string hello = "Hello from C++";
            return env->NewStringUTF(hello.c_str());
        }
        ```

  - ==**第七步  使用终端来到 `app/src/main/jni` 目录内,  使用 `ndk-build` 命令生成 `libhello.so` 文件**==

    - 这时会多出两个目录.  `libs` 和 `obj`
      - libs 里面存放的才是 生成出来的 hello.so 文件

  - ==**第八步  将`app/src/main/libs`  目录内的所有内容, 拷贝到 `app/src/main/jniLibs` 这个目录内**==

- **完成**



